import {
  a,
  n,
  o,
  o2,
  o3
} from "./chunk-3APLUSOJ.js";
import "./chunk-OL3AADLO.js";

// node_modules/@tauri-apps/api/shell-e5849d56.js
function o4(t, o5, s2, u2) {
  return void 0 === s2 && (s2 = []), o(this, void 0, void 0, function() {
    return a(this, function(e) {
      return "object" == typeof s2 && Object.freeze(s2), [2, o3({ __tauriModule: "Shell", message: { cmd: "execute", program: o5, args: s2, options: u2, onEventFn: o2(t) } })];
    });
  });
}
var s = function() {
  function t() {
    this.eventListeners = /* @__PURE__ */ Object.create(null);
  }
  return t.prototype.addListener = function(t2, e) {
    return this.on(t2, e);
  }, t.prototype.removeListener = function(t2, e) {
    return this.off(t2, e);
  }, t.prototype.on = function(t2, e) {
    return t2 in this.eventListeners ? this.eventListeners[t2].push(e) : this.eventListeners[t2] = [e], this;
  }, t.prototype.once = function(t2, e) {
    var n2 = this, r = function() {
      for (var i = [], o5 = 0; o5 < arguments.length; o5++)
        i[o5] = arguments[o5];
      n2.removeListener(t2, r), e.apply(void 0, i);
    };
    return this.addListener(t2, r);
  }, t.prototype.off = function(t2, e) {
    return t2 in this.eventListeners && (this.eventListeners[t2] = this.eventListeners[t2].filter(function(t3) {
      return t3 !== e;
    })), this;
  }, t.prototype.removeAllListeners = function(t2) {
    return t2 ? delete this.eventListeners[t2] : this.eventListeners = /* @__PURE__ */ Object.create(null), this;
  }, t.prototype.emit = function(t2) {
    for (var e = [], n2 = 1; n2 < arguments.length; n2++)
      e[n2 - 1] = arguments[n2];
    if (t2 in this.eventListeners) {
      for (var r = this.eventListeners[t2], i = 0, o5 = r; i < o5.length; i++) {
        var s2 = o5[i];
        s2.apply(void 0, e);
      }
      return true;
    }
    return false;
  }, t.prototype.listenerCount = function(t2) {
    return t2 in this.eventListeners ? this.eventListeners[t2].length : 0;
  }, t.prototype.prependListener = function(t2, e) {
    return t2 in this.eventListeners ? this.eventListeners[t2].unshift(e) : this.eventListeners[t2] = [e], this;
  }, t.prototype.prependOnceListener = function(t2, e) {
    var n2 = this, r = function() {
      for (var i = [], o5 = 0; o5 < arguments.length; o5++)
        i[o5] = arguments[o5];
      n2.removeListener(t2, r), e.apply(void 0, i);
    };
    return this.prependListener(t2, r);
  }, t;
}();
var u = function() {
  function t(t2) {
    this.pid = t2;
  }
  return t.prototype.write = function(t2) {
    return o(this, void 0, void 0, function() {
      return a(this, function(e) {
        return [2, o3({ __tauriModule: "Shell", message: { cmd: "stdinWrite", pid: this.pid, buffer: "string" == typeof t2 ? t2 : Array.from(t2) } })];
      });
    });
  }, t.prototype.kill = function() {
    return o(this, void 0, void 0, function() {
      return a(this, function(t2) {
        return [2, o3({ __tauriModule: "Shell", message: { cmd: "killChild", pid: this.pid } })];
      });
    });
  }, t;
}();
var a2 = function(r) {
  function i(t, e, n2) {
    void 0 === e && (e = []);
    var i2 = r.call(this) || this;
    return i2.stdout = new s(), i2.stderr = new s(), i2.program = t, i2.args = "string" == typeof e ? [e] : e, i2.options = null != n2 ? n2 : {}, i2;
  }
  return n(i, r), i.sidecar = function(t, e, n2) {
    void 0 === e && (e = []);
    var r2 = new i(t, e, n2);
    return r2.options.sidecar = true, r2;
  }, i.prototype.spawn = function() {
    return o(this, void 0, void 0, function() {
      var t = this;
      return a(this, function(e) {
        return [2, o4(function(e2) {
          switch (e2.event) {
            case "Error":
              t.emit("error", e2.payload);
              break;
            case "Terminated":
              t.emit("close", e2.payload);
              break;
            case "Stdout":
              t.stdout.emit("data", e2.payload);
              break;
            case "Stderr":
              t.stderr.emit("data", e2.payload);
          }
        }, this.program, this.args, this.options).then(function(t2) {
          return new u(t2);
        })];
      });
    });
  }, i.prototype.execute = function() {
    return o(this, void 0, void 0, function() {
      var t = this;
      return a(this, function(e) {
        return [2, new Promise(function(e2, n2) {
          t.on("error", n2);
          var r2 = [], i2 = [];
          t.stdout.on("data", function(t2) {
            r2.push(t2);
          }), t.stderr.on("data", function(t2) {
            i2.push(t2);
          }), t.on("close", function(t2) {
            e2({ code: t2.code, signal: t2.signal, stdout: r2.join("\n"), stderr: i2.join("\n") });
          }), t.spawn().catch(n2);
        })];
      });
    });
  }, i;
}(s);
function c(t, i) {
  return o(this, void 0, void 0, function() {
    return a(this, function(e) {
      return [2, o3({ __tauriModule: "Shell", message: { cmd: "open", path: t, with: i } })];
    });
  });
}
var p = Object.freeze({ __proto__: null, Command: a2, Child: u, EventEmitter: s, open: c });
export {
  u as Child,
  a2 as Command,
  s as EventEmitter,
  c as open
};
//# sourceMappingURL=@tauri-apps_api_shell.js.map
